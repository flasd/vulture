{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 01215776cff0bbe188b9","webpack:///./src/index.js","webpack:///./src/helpers.js","webpack:///(webpack)/buildin/global.js"],"names":[],"mappings":"AAAA,cACA,2BACA,uCACA,sCACA,IACA,aACA,yCAEA,cACA,GAAC,mBACD,kBCTA,cAMA,IACA,iBAGA,mBACA,CACA,IACA,KAIA,2CAGA,aAGA,OACA,OAIA,IAzBA,eA4BA,MAGA,uBACA,GACA,kCACA,CACA,gBACA,cAGA,OAGA,iBACA,YACA,qBAA2B,UAA0B,UACrD,YAAiC,CAAe,QAChD,EAEA,aADA,QAIA,mBAAsD,wCAA+D,SAGrH,MAGA,wICrDA,+eARA,WAaqB,YACjB,CAAY,aAAa,cACrB,QAAM,GAIA,GAAU,OAEhB,UALI,OAGJ,kBAEe,qBAEf,OAAY,UAAiB,WACzB,QAAO,eAAe,EAAc,UAChC,CACA,cACA,gBACA,kBAEP,MAhBoB,uBAkBrB,eAAK,MACD,CACA,wBACA,EAEP,SAED,kBAsCA,+BAGe,OACX,KAAM,EAAS,KAEf,mCAAO,CAAC,EAAO,wBAaf,2DAAO,QAAgD,mBACnD,GAAY,SACR,CACA,SACA,aAEP,gBAED,IACH,0BAED,2CAII,IAAM,GAAS,KAEf,mCACI,EAAO,wBAIX,oDAAO,QACP,WAAO,GACV,uBAED,sBAKM,WAAI,OACN,kBACI,KAAK,MAAM,MAIf,4DACkB,UAAP,kEAC2C,uBAGtD,UAAM,GAAQ,KAAK,MAAM,YAAiB,QAC1C,cAAK,MAAM,UAEX,EAAO,UACH,GAAK,MAAM,YAAmB,SAC9B,KAAK,MAAM,UACd,CACJ,CAED,uBAKc,aAAU,OACpB,qBACI,KAAK,MAAM,MAIf,6DACI,KAAQ,iFACwD,uBAGpE,OAEA,CAFI,QAAK,MAAM,iBAET,GAAW,KAAjB,0BAEoB,MAChB,kBAAQ,GAAQ,YAAkB,KAhBlB,mCAepB,cAAM,GAAc,EAElB,OAAW,aAAJ,OAAe,KAExB,QAEA,QAFI,QAAK,QAAQ,kBAEC,MAElB,MACI,WACI,CACc,KAAV,OADA,KAAK,QAAQ,SACK,EAAQ,SAEhB,MAEjB,IA9Be,uBAiCpB,iBAAM,GAAU,OAA6B,iBAE7C,KAAK,MAAM,cAAoB,kBAAW,KAnCtB,uBAoCvB,WAED,qBAMK,WAAI,OACL,wBACI,KAAK,MAAM,MAIf,2DACkB,UAAP,mEAC4C,uBAGvD,OAAO,UACH,IACI,OAAO,gBACV,UAFD,CAES,QACL,CAEH,cADG,SAEP,CACJ,CAED,6BAMa,WAAI,OACb,wBACI,KAAK,MAAM,MAIf,mEACkB,UAAP,2EACoD,uBAG/D,OAAQ,WAAgB,uDAAT,IAAS,OACpB,gBACA,GAAI,EAEJ,QACI,GAAS,EACZ,eAFD,CAES,QACL,CACA,MACH,SAED,CACH,MACJ,CAED,oBAOK,WACD,cACI,KAAK,MAAM,MAIf,0DACkB,UAAP,mEAC4C,yDARzC,2BAAN,IAAM,OAWd,mBAAO,MAAU,QACpB,eAED,4BAOgB,aACZ,cACI,KAAK,MAAM,MAIf,kEACkB,UAAP,2EACoD,uBAG/D,oBACkB,UAAP,oFAC6D,yDAb/C,2BAAN,IAAM,OAgBzB,kBAAkB,6BAAI,IACzB,UAED,8BAII,MAAK,MACD,CACA,wBACA,EAEP,uCArQkB,WACf,cACmB,QAAR,wEACiD,0CAHxC,WAOX,kBAAW,GAAU,QAPV,4DAQX,kBAAS,CAAE,EARA,mCAMpB,iBAAO,GAGF,OAAW,aAAJ,OAAe,KAC9B,EAED,yBAKgB,WACZ,cACmB,QAAR,qEAC8C,uBAGzD,cAAa,SANI,WASJ,WACL,GAAS,EAAe,UAC3B,eAXY,uBAajB,UACH,oBA9DgB,4KCbrB,CAgG2B,aAAK,WACrB,OAAY,UAAS,YAAK,OAAC,CAAc,OADpB,mCAC5B,iBAAO,GAAgD,OAAO,YAAK,QACtE,E,oDA5Fe,OAAkB,WAC9B,IAIQ,QAAM,IAGjB,UAGD,IAKgB,iCACZ,IAAM,GAAO,MAAM,MAAM,KAAM,MAAM,KAAK,IAAI,OAAO,UAAU,QAC/D,KAAM,oCAAY,oBAElB,cAAO,GAEH,MAAM,CAAC,CAAC,EACR,aAAS,CAAC,CAAC,EAGX,aAAM,CAAC,CAAC,EACR,kBAAc,CAAC,CAAC,EAChB,yBAAa,CAAC,CAAC,EACf,qBAAU,CAAC,CAAC,EACZ,oBAAY,CAAC,CAAC,EACd,kBAAQ,CAAC,CAAC,EACV,aAAO,CAAC,CAAC,EACT,sBAAiB,CAAC,CAAC,EAE1B,iBAED,IAKgB,6BACZ,IAAM,GACA,WADI,QAAO,QAEX,EAEN,WAFU,QAAO,YAET,aAAK,QAAN,EAAS,KAAK,KAAM,EAAI,OAAS,EAAI,KAF5C,WADiB,UAIpB,MAED,IAMgB,QAAQ,WACpB,IAAM,GAAM,SAER,gBAEA,yBAEA,6BAGI,8BAAO,YAElB,MAOY,IAeG,wBAfQ,CACpB,uCACA,sCACA,uCACA,2CACA,4CAIJ,yLC1FA,GAGA,aACA,OACA,KAAC,IAED,GAEA,0CACA,OAAC,SAED,CACA,4BACA,OAI4C,CAE5C","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Vulture\"] = factory();\n\telse\n\t\troot[\"Vulture\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 01215776cff0bbe188b9","import {\n    assert,\n    getAvailableErrorProps,\n    getGlobalNamespace,\n    isError,\n    patterns,\n} from './helpers';\n\n/**\n * Vulture Class\n *\n * @class      Vulture\n */\nexport default class Vulture {\n    constructor(userOptions) {\n        const defaults = {\n            purge: 'strict',\n        };\n\n        const options = Object.assign({}, defaults, userOptions);\n\n        this.options = {}\n\n        Object.keys(options).forEach(k => {\n            Object.defineProperty(this.options, k, {\n                enumerable: false,\n                configurable: false,\n                writable: false,\n                value: options[k],\n            });\n        });\n\n        this.state = {\n            subscribers: [],\n            subCount: 0,\n            alive: true,\n        };\n    }\n\n    /**\n     * Determines if given string has sensitive info.\n     *\n     * @param      {string}  stg     Given string.\n     */\n    static isSensitive(stg) {\n        assert(\n            typeof stg === 'string',\n            `isSensitive must recive a string, instead got ${typeof stg}`,\n        );\n\n        return patterns\n            .map(pattern => stg.match(pattern))\n            .map(match => !!match)\n            .reduce((x, y) => x || y);\n    }\n\n    /**\n     * Sanitizes a given string.\n     *\n     * @param      {string}  stg     Given string.\n     */\n    static sanitize(stg) {\n        assert(\n            typeof stg === 'string',\n            `sanitize must recive a string, instead got ${typeof stg}`,\n        );\n\n        let result = stg;\n\n        patterns\n            .forEach(pattern => {\n                result = result.replace(pattern, '############');\n            });\n\n        return result;\n    }\n\n    /**\n     * Binds Vulture to the global scope.\n     */\n    bindToGlobal() {\n        const global = getGlobalNamespace();\n\n        assert(!global.__VULTURE_IS_HOVERING__,\n            `There's already a volture hovering the global scope.`,\n        );\n\n        /**\n         * Report uncauthc error at global scope\n         *\n         * @param      {message || Event}  x             Ignored...\n         * @param      {string}            source        The source,\n         * @param      {number}            lineNumber    The line number,\n         * @param      {number}            columnNumber  The column number,\n         * @param      {Error}             error         The error,\n         */\n        global.onerror = (x, source, lineNumber, columnNumber, error) => {\n            this.report(error, {\n                source,\n                lineNumber,\n                columnNumber,\n            });\n        }\n\n        global.__VULTURE_IS_HOVERING__ = true;\n    }\n\n    /**\n     * Unbinds vulture from global scope.\n     */\n    unbindFromGlobal() {\n        const global = getGlobalNamespace();\n\n        assert(\n            global.__VULTURE_IS_HOVERING__,\n            `There's no volture hovering the global scope.`,\n        );\n\n        global.onerror = null;\n        delete global.__VULTURE_IS_HOVERING__;\n    }\n\n    /**\n     * Hover the local scope and call fn with any catch error\n     *\n     * @param      {Function}  fn      The error handler\n     */\n    hover(fn) {\n        assert(\n            this.state.alive,\n            `Cannot hover using a dead Vulture instance.`,\n        );\n\n        assert(\n            typeof fn === 'function',\n            `Hoverer must be a function, instead got ${typeof fn}`,\n        );\n\n        const index = this.state.subscribers.push(fn) - 1;\n        this.state.subCount += 1;\n\n        return () => {\n            this.state.subscribers.splice(index, 1);\n            this.state.subCount -= 1;\n        }\n    }\n\n    /**\n     * Report the error for all hoverers.\n     *\n     * @param      {Errir}  error   The error.\n     */\n    report(error, moreInfo) {\n        assert(\n            this.state.alive,\n            `Cannot report using a dead Vulture instance.`,\n        );\n\n        assert(\n            isError(error),\n            `Vulture.report expected Error Object, but instead got ${typeof error}`,\n        );\n\n        if (this.state.subCount === 0) { return; }\n\n        const errProps = getAvailableErrorProps();\n\n        const isSensitive = errProps.map(\n            prop => Vulture.isSensitive(error[prop])\n        ).reduce((x, y) => x || y);\n\n        if (this.options.purge === 'strict' && isSensitive) { return; }\n\n        const errObject = {};\n\n        errProps.forEach(\n            prop => {\n                if (this.options.purge === 'loose' && isSensitive) {\n                    errObject[prop] = Vulture.sanitize(error[prop]);\n                } else {\n                    errObject[prop] = error[prop];\n                }\n            }\n        );\n\n        const payload = Object.assign({}, errObject, moreInfo);\n\n        this.state.subscribers.forEach(sub => sub(payload));\n    }\n\n    /**\n     * Wraps a given function with a try catch block,\n     *\n     * @param      {Function}  fn      The function,\n     * @return     {Function}  A wrapped function.\n     */\n    wrap(fn) {\n        assert(\n            this.state.alive,\n            `Cannot wrap using a dead Vulture instance.`,\n        );\n\n        assert(\n            typeof fn === 'function',\n            `wrap expected a function but instead got ${typeof fn}`,\n        );\n\n        return (...args) => {\n            try {\n                return fn(...args);\n            } catch (error) {\n                this.report(error);\n                return;\n            }\n        }\n    }\n\n    /**\n     * Wraps a function that invokes a callback after is completed.\n     *\n     * @param      {Function}  fn      The function,\n     * @return     {Function}  A wrapped function.\n     */\n    wrapCallback(fn) {\n        assert(\n            this.state.alive,\n            `Cannot wrapCallback using a dead Vulture instance.`,\n        );\n\n        assert(\n            typeof fn === 'function',\n            `wrapCallback expected a function but instead got ${typeof fn}`,\n        );\n\n        return (cb, ...args) => {\n            let result = undefined;\n            let error = null;\n\n            try {\n                result = fn(...args);\n            } catch (err) {\n                error = err;\n                this.report(err);\n            }\n\n            cb(error, result);\n        }\n    }\n\n    /**\n     * Wrap a function with the reporter.\n     *\n     * @param      {Function}  fn      The function,\n     * @param      {Array}     args    The arguments,\n     * @return     {Any}    Whatever the function returns.\n     */\n    try (fn, ...args) {\n        assert(\n            this.state.alive,\n            `Cannot try using a dead Vulture instance.`,\n        );\n\n        assert(\n            typeof fn === 'function',\n            `wrap expected a function but instead got ${typeof fn}`,\n        );\n\n        return this.wrap(fn)(...args);\n    }\n\n    /**\n     * Wraps a node style callback with the reporter.\n     *\n     * @param      {Function}  fn      The function,\n     * @param      {Array}     args    The arguments,\n     * @param      {Function}  cb      The callback.\n     */\n    tryCallback(fn, cb, ...args) {\n        assert(\n            this.state.alive,\n            `Cannot tryCallback using a dead Vulture instance.`,\n        );\n\n        assert(\n            typeof fn === 'function',\n            `wrapCallback expected a function but instead got ${typeof fn}`,\n        );\n\n        assert(\n            typeof cb === 'function',\n            `wrapCallback expected a callback function but instead got ${typeof cb}`,\n        );\n\n        this.wrapCallback(fn)(cb, ...args);\n    }\n\n    /**\n     * Marks an instance as dead.\n     */\n    die() {\n        this.state = {\n            subscribers: [],\n            subCount: 0,\n            alive: false,\n        };\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/**\n * Invariant Like assertion utility\n *\n * @param      {boolean}  condition  The condition,\n * @param      {string}  message    The message.\n */\nexport function assert(condition, message) {\n    if (!condition) {\n        if (process.env.NODE_ENV !== 'production') {\n            throw new TypeError(message);\n        } else {\n            throw new TypeError();\n        }\n    }\n}\n\n\n/**\n * Gets the available error properties.\n *\n * @return     {Array}  The available error properties.\n */\nexport function getAvailableErrorProps() {\n    const args = Array.apply(null, Array(10)).map(String.prototype.valueOf, 'X');\n    const error = new Error(...args);\n\n    return pickTruthy({\n        // Defaults\n        name: !!error.name,\n        message: !!error.message,\n\n        // Vendor Specific\n        code: !!error.code,\n        columnNumber: !!error.columnNumber,\n        description: !!error.description,\n        fileName: !!error.fileName,\n        lineNumber: !!error.lineNumber,\n        number: !!error.number,\n        stack: !!error.stack,\n        stackTraceLimit: !!error.stackTraceLimit,\n    });\n}\n\n/**\n * Gets the global namespace.\n *\n * @return     {Object}  The global namespace.\n */\nexport function getGlobalNamespace() {\n    const W = typeof window !== 'undefined';\n    const G = typeof global !== 'undefined';\n    const S = typeof self !== 'undefined';\n\n    return (g => g).call(this, W ? window : S ? self : G ? global : {});\n}\n\n/**\n * Determines if given value is an error.\n *\n * @param      {Any}      value   The value,\n * @return     {boolean}  True if error, False otherwise.\n */\nexport function isError(value) {\n    const tag = toString.call(value);\n    switch (tag) {\n        case '[object Error]':\n            return true;\n        case '[object Exception]':\n            return true;\n        case '[object DOMException]':\n            return true;\n        default:\n            return value instanceof Error;\n    }\n}\n\n/**\n * Regexes to filter sensitive content.\n *\n * @type       {Array}\n */\nexport const patterns = [\n    /api(_|-)?key(\\W*){1,30}?[\\w\\s]*(\\W)/g,\n    /passw(or)?d(\\W*){1,30}?[\\w\\s]*(\\W)/g,\n    /user(_|-)?id(\\W*){1,30}?[\\w\\s]*(\\W)/g,\n    /auth(orization)?(\\W*){1,30}?[\\w\\s]*(\\W)/g,\n    /access(_|-)?token(\\W*){1,30}?[\\w\\s]*(\\W)/g,\n    /^(?:4[0-9]{12}(?:[0-9]{3})?|[25][1-7][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\\d{3})\\d{11})$/g,\n];\n\n/**\n * Get all object properties that have a truthy value\n *\n * @param      {Object}  obj     The object,\n * @return     {Array}  The truthy keys\n */\nexport function pickTruthy(obj) {\n    return Object.keys(obj).map(k => !!obj[k] ? k : false).filter(x => x);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers.js","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\n} catch(e) {\n\t// This works if the window reference is available\n\tif(typeof window === \"object\")\n\t\tg = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}