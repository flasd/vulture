(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.Vulture=b():a.Vulture=b()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)}([function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0});var e='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},f=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(1),h=function(){function a(b){var c=this;d(this,a);var e=Object.assign({},{purge:'strict'},b);this.options={};for(var f=Object.keys(e),g=function(a){Object.defineProperty(c.options,a,{enumerable:!1,configurable:!1,writable:!1,value:e[a]})},h=0;h<f.length;h++)g(f[h],h,f);this.state={subscribers:[],subCount:0,alive:!0}}return f(a,[{key:'bindToGlobal',value:function(){var a=this,b=(0,g.getGlobalNamespace)();(0,g.assert)(!b.__VULTURE_IS_HOVERING__,'There\'s already a volture hovering the global scope.'),b.onerror=function(b,c,d,e,f){a.report(f,{source:c,lineNumber:d,columnNumber:e})},b.__VULTURE_IS_HOVERING__=!0}},{key:'unbindFromGlobal',value:function(){var a=(0,g.getGlobalNamespace)();(0,g.assert)(a.__VULTURE_IS_HOVERING__,'There\'s no volture hovering the global scope.'),a.onerror=null,delete a.__VULTURE_IS_HOVERING__}},{key:'hover',value:function(a){var b=this;(0,g.assert)(this.state.alive,'Cannot hover using a dead Vulture instance.'),(0,g.assert)('function'==typeof a,'Hoverer must be a function, instead got '+('undefined'==typeof a?'undefined':e(a)));var c=this.state.subscribers.push(a)-1;return this.state.subCount+=1,function(){b.state.subscribers.splice(c,1),b.state.subCount-=1}}},{key:'report',value:function(b,c){var d=this;if((0,g.assert)(this.state.alive,'Cannot report using a dead Vulture instance.'),(0,g.assert)((0,g.isError)(b),'Vulture.report expected Error Object, but instead got '+('undefined'==typeof b?'undefined':e(b))),0!==this.state.subCount){for(var f=(0,g.getAvailableErrorProps)(),h=f,i=function(c){return a.isSensitive(b[c])},j=[],k=0;k<h.length;k++)j.push(i(h[k],k,h));var l=j.reduce(function(a,b){return a||b});if(!('strict'===this.options.purge&&l)){for(var m={},n=f,o=function(c){m[c]='loose'===d.options.purge&&l?a.sanitize(b[c]):b[c]},p=0;p<n.length;p++)o(n[p],p,n);for(var q=Object.assign({},m,c),r=this.state.subscribers,s=function(a){return a(q)},t=0;t<r.length;t++)s(r[t],t,r)}}}},{key:'wrap',value:function(a){var b=this;return(0,g.assert)(this.state.alive,'Cannot wrap using a dead Vulture instance.'),(0,g.assert)('function'==typeof a,'wrap expected a function but instead got '+('undefined'==typeof a?'undefined':e(a))),function(){try{return a.apply(void 0,arguments)}catch(a){return void b.report(a)}}}},{key:'wrapCallback',value:function(a){var b=this;return(0,g.assert)(this.state.alive,'Cannot wrapCallback using a dead Vulture instance.'),(0,g.assert)('function'==typeof a,'wrapCallback expected a function but instead got '+('undefined'==typeof a?'undefined':e(a))),function(c){for(var d=arguments.length,e=Array(1<d?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];var g,h=null;try{g=a.apply(void 0,e)}catch(a){h=a,b.report(a)}c(h,g)}}},{key:'try',value:function(a){(0,g.assert)(this.state.alive,'Cannot try using a dead Vulture instance.'),(0,g.assert)('function'==typeof a,'wrap expected a function but instead got '+('undefined'==typeof a?'undefined':e(a)));for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return this.wrap(a).apply(void 0,c)}},{key:'tryCallback',value:function(a,b){(0,g.assert)(this.state.alive,'Cannot tryCallback using a dead Vulture instance.'),(0,g.assert)('function'==typeof a,'wrapCallback expected a function but instead got '+('undefined'==typeof a?'undefined':e(a))),(0,g.assert)('function'==typeof b,'wrapCallback expected a callback function but instead got '+('undefined'==typeof b?'undefined':e(b)));for(var c=arguments.length,d=Array(2<c?c-2:0),f=2;f<c;f++)d[f-2]=arguments[f];this.wrapCallback(a).apply(void 0,[b].concat(d))}},{key:'die',value:function(){this.state={subscribers:[],subCount:0,alive:!1}}}],[{key:'isSensitive',value:function(a){(0,g.assert)('string'==typeof a,'isSensitive must recive a string, instead got '+('undefined'==typeof a?'undefined':e(a)));for(var b=g.patterns,c=function(b){return a.match(b)},d=[],f=0;f<b.length;f++)d.push(c(b[f],f,b));for(var h=d,i=function(a){return!!a},j=[],k=0;k<h.length;k++)j.push(i(h[k],k,h));return j.reduce(function(a,b){return a||b})}},{key:'sanitize',value:function(a){(0,g.assert)('string'==typeof a,'sanitize must recive a string, instead got '+('undefined'==typeof a?'undefined':e(a)));for(var b=a,c=g.patterns,d=function(a){b=b.replace(a,'############')},f=0;f<c.length;f++)d(c[f],f,c);return b}}]),a}();b.default=h},function(a,b,c){'use strict';(function(a){function c(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function d(a){for(var b=Object.keys(a),c=function(b){return!!a[b]&&b},d=[],e=0;e<b.length;e++)d.push(c(b[e],e,b));return d.filter(function(a){return a})}Object.defineProperty(b,'__esModule',{value:!0}),b.assert=function(a){if(!a)throw new TypeError},b.getAvailableErrorProps=function(){var a=Array.apply(null,Array(10)).map(String.prototype.valueOf,'X'),b=new(Function.prototype.bind.apply(Error,[null].concat(c(a))));return d({name:!!b.name,message:!!b.message,code:!!b.code,columnNumber:!!b.columnNumber,description:!!b.description,fileName:!!b.fileName,lineNumber:!!b.lineNumber,number:!!b.number,stack:!!b.stack,stackTraceLimit:!!b.stackTraceLimit})},b.getGlobalNamespace=function(){var b='undefined'!=typeof window,c='undefined'!=typeof self;return function(a){return a}.call(this,b?window:c?self:'undefined'!=typeof a?a:{})},b.isError=function(a){var b=toString.call(a);return!('[object Error]'!==b)||!('[object Exception]'!==b)||!('[object DOMException]'!==b)||a instanceof Error},b.pickTruthy=d;b.patterns=[/api(_|-)?key(\W*){1,30}?[\w\s]*(\W)/g,/passw(or)?d(\W*){1,30}?[\w\s]*(\W)/g,/user(_|-)?id(\W*){1,30}?[\w\s]*(\W)/g,/auth(orization)?(\W*){1,30}?[\w\s]*(\W)/g,/access(_|-)?token(\W*){1,30}?[\w\s]*(\W)/g,/^(?:4[0-9]{12}(?:[0-9]{3})?|[25][1-7][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/g]}).call(b,c(2))},function(a){var b=function(){return this}();try{b=b||Function('return this')()||(1,eval)('this')}catch(a){'object'==typeof window&&(b=window)}a.exports=b}])});
//# sourceMappingURL=index.js.map